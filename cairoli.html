<html>
<head>
<script>

let gl = null;
let tex = null;
let main = function() {
  console.log('hi');
  gl = canvas.getContext('webgl2');
  tex = gl.createTexture();
}


let onFrame = function(now, frame_metadata) {
  MyVideo.requestVideoFrameCallback(onFrame);

  TimeSlider.max = MyVideo.duration;
  TimeSliderValue.max = MyVideo.duration;
  TimeSlider.value = MyVideo.currentTime;
  TimeSliderValue.value = Number(TimeSlider.value).toLocaleString('fullwide', {
      minimumFractionDigits:3,
      maximumFractionDigits:3,
      minimumIntegerDigits:3});

  onImageBitmapSource(MyVideo, MyVideo.videoWidth, MyVideo.videoHeight);
}

</script>
</head>
<body onload="main();">

<p>Without AGTM</p>
<p>
<video controls style="max-width:80%; height:40vh;" src="cairoli-av1.mp4"  ></video>
</p>

<p>With AGTM (much darker test profile)</p>
<p>
<canvas id="MyCanvas" style="max-width:80%; height:40vh;">
</canvas>
</p>

</body>
</html>
